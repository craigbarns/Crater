import{H as T,I as A,J,m as ee,l as E,d as C,K as H,e as F,p as w,q as N,a2 as ae,v as K,r,o as k,j as z,h as l,b as i,t as f,x as s,w as O,a as e,z as G,n as P,g as L,a5 as te,c as R,y as ne,F as oe,L as le}from"./main.dcc3e423.js";const se={class:"flex justify-between w-full"},de={class:"px-6 pt-6"},ie={class:"font-medium text-lg text-left"},re={class:"mt-2 text-sm leading-snug text-gray-500",style:{"max-width":"680px"}},ue={class:"p-4 sm:p-6 space-y-4"},me={class:"z-0 flex justify-end p-4 bg-gray-50 border-modal-bg"},pe={__name:"DeleteCompanyModal",setup(Q){const p=T(),v=A(),I=J(),V=ee(),{t:h}=E();let u=C(!1);const a=H({id:p.selectedCompany.id,name:null}),$=F(()=>v.active&&v.componentName==="DeleteCompanyModal"),y={formData:{name:{required:w.withMessage(h("validation.required"),N),sameAsName:w.withMessage(h("validation.company_name_not_same"),ae(p.selectedCompany.name))}}},c=K(y,{formData:a},{$scope:!1});async function B(){if(c.value.$touch(),c.value.$invalid)return!0;const g=p.companies[0];u.value=!0;try{const b=await p.deleteCompany(a);console.log(b.data.success),b.data.success&&(m(),await p.setSelectedCompany(g),V.push("/admin/dashboard"),await I.setIsAppLoaded(!1),await I.bootstrap()),u.value=!1}catch{u.value=!1}}function D(){a.id=null,a.name="",c.value.$reset()}function m(){v.closeModal(),setTimeout(()=>{D(),c.value.$reset()},300)}return(g,b)=>{const M=r("BaseInput"),x=r("BaseInputGroup"),o=r("BaseButton"),t=r("BaseIcon"),S=r("BaseModal");return k(),z(S,{show:$.value,onClose:m},{default:l(()=>[i("div",se,[i("div",de,[i("h6",ie,f(s(v).title),1),i("p",re,f(g.$t("settings.company_info.delete_company_modal_desc",{company:s(p).selectedCompany.name})),1)])]),i("form",{action:"",onSubmit:O(B,["prevent"])},[i("div",ue,[e(x,{label:g.$t("settings.company_info.delete_company_modal_label",{company:s(p).selectedCompany.name}),error:s(c).formData.name.$error&&s(c).formData.name.$errors[0].$message,required:""},{default:l(()=>[e(M,{modelValue:a.name,"onUpdate:modelValue":b[0]||(b[0]=d=>a.name=d),invalid:s(c).formData.name.$error,onInput:b[1]||(b[1]=d=>s(c).formData.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),i("div",me,[e(o,{class:"mr-3 text-sm",variant:"primary-outline",outline:"",type:"button",onClick:m},{default:l(()=>[G(f(g.$t("general.cancel")),1)]),_:1}),e(o,{loading:s(u),disabled:s(u),variant:"danger",type:"submit"},{left:l(d=>[s(u)?L("",!0):(k(),z(t,{key:0,name:"TrashIcon",class:P(d.class)},null,8,["class"]))]),default:l(()=>[G(" "+f(g.$t("general.delete")),1)]),_:1},8,["loading","disabled"])])],32)]),_:1},8,["show"])}}},ce={class:"text-base font-semibold text-gray-900 mb-4"},_e={class:"text-base font-semibold text-gray-900 mb-4"},fe={key:0,class:"py-5"},be={class:"text-lg leading-6 font-medium text-gray-900"},ye={class:"mt-2 max-w-xl text-sm text-gray-500"},ge={class:"mt-5"},$e={__name:"CompanyInfoSettings",setup(Q){const p=T(),v=J(),I=A(),{t:V}=E(),h=te("utils");let u=C(!1);const a=H({name:null,logo:null,address:{address_street_1:"",address_street_2:"",website:"",country_id:null,state:"",city:"",phone:"",zip:""},business_registration_number:null,tax_id:null,bank_name:null,bank_account_number:null,bank_swift_bic:null,bank_iban:null});h.mergeSettings(a,{...p.selectedCompany});let $=C([]),y=C(null),c=C(null);const B=C(!1);a.logo&&$.value.push({image:a.logo});const D=F(()=>({name:{required:w.withMessage(V("validation.required"),N),minLength:w.withMessage(V("validation.name_min_length"),le(3))},address:{country_id:{required:w.withMessage(V("validation.required"),N)}}})),m=K(D,F(()=>a));v.fetchCountries();function g(o,t,S,d){c.value=d.name,y.value=t}function b(){y.value=null,B.value=!0}async function M(){if(m.value.$touch(),m.value.$invalid)return!0;if(u.value=!0,(await p.updateCompany(a)).data.data){if(y.value||B.value){let t=new FormData;y.value&&t.append("company_logo",JSON.stringify({name:c.value,data:y.value})),t.append("is_company_logo_removed",B.value),await p.updateCompanyLogo(t),y.value=null,B.value=!1}u.value=!1}u.value=!1}function x(o){I.openModal({title:V("settings.company_info.are_you_absolutely_sure"),componentName:"DeleteCompanyModal",size:"sm"})}return(o,t)=>{const S=r("BaseFileUploader"),d=r("BaseInputGroup"),U=r("BaseInputGrid"),_=r("BaseInput"),W=r("BaseMultiselect"),j=r("BaseTextarea"),q=r("BaseDivider"),X=r("BaseIcon"),Y=r("BaseButton"),Z=r("BaseSettingCard");return k(),R(oe,null,[i("form",{onSubmit:O(M,["prevent"])},[e(Z,{title:o.$t("settings.company_info.company_info"),description:o.$t("settings.company_info.section_description")},{default:l(()=>[e(U,{class:"mt-5"},{default:l(()=>[e(d,{label:o.$tc("settings.company_info.company_logo")},{default:l(()=>[e(S,{modelValue:s($),"onUpdate:modelValue":t[0]||(t[0]=n=>ne($)?$.value=n:$=n),base64:"",onChange:g,onRemove:b},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(U,{class:"mt-5"},{default:l(()=>[e(d,{label:o.$tc("settings.company_info.company_name"),error:s(m).name.$error&&s(m).name.$errors[0].$message,required:""},{default:l(()=>[e(_,{modelValue:a.name,"onUpdate:modelValue":t[1]||(t[1]=n=>a.name=n),invalid:s(m).name.$error,onBlur:t[2]||(t[2]=n=>s(m).name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),e(d,{label:o.$tc("settings.company_info.phone")},{default:l(()=>[e(_,{modelValue:a.address.phone,"onUpdate:modelValue":t[3]||(t[3]=n=>a.address.phone=n)},null,8,["modelValue"])]),_:1},8,["label"]),e(d,{label:o.$tc("settings.company_info.country"),error:s(m).address.country_id.$error&&s(m).address.country_id.$errors[0].$message,required:""},{default:l(()=>[e(W,{modelValue:a.address.country_id,"onUpdate:modelValue":t[4]||(t[4]=n=>a.address.country_id=n),label:"name",invalid:s(m).address.country_id.$error,options:s(v).countries,"value-prop":"id","can-deselect":!0,"can-clear":!1,searchable:"","track-by":"name"},null,8,["modelValue","invalid","options"])]),_:1},8,["label","error"]),e(d,{label:o.$tc("settings.company_info.state")},{default:l(()=>[e(_,{modelValue:a.address.state,"onUpdate:modelValue":t[5]||(t[5]=n=>a.address.state=n),name:"state",type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),e(d,{label:o.$tc("settings.company_info.city")},{default:l(()=>[e(_,{modelValue:a.address.city,"onUpdate:modelValue":t[6]||(t[6]=n=>a.address.city=n),type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),e(d,{label:o.$tc("settings.company_info.zip")},{default:l(()=>[e(_,{modelValue:a.address.zip,"onUpdate:modelValue":t[7]||(t[7]=n=>a.address.zip=n)},null,8,["modelValue"])]),_:1},8,["label"]),i("div",null,[e(d,{label:o.$tc("settings.company_info.address")},{default:l(()=>[e(j,{modelValue:a.address.address_street_1,"onUpdate:modelValue":t[8]||(t[8]=n=>a.address.address_street_1=n),rows:"2"},null,8,["modelValue"])]),_:1},8,["label"]),e(j,{modelValue:a.address.address_street_2,"onUpdate:modelValue":t[9]||(t[9]=n=>a.address.address_street_2=n),rows:"2",row:2,class:"mt-2"},null,8,["modelValue"])])]),_:1}),e(q,{class:"my-6"}),i("h3",ce,f(o.$t("settings.company_info.legal_tax_info")),1),e(U,{class:"mb-5"},{default:l(()=>[e(d,{label:o.$t("settings.company_info.business_registration_number")},{default:l(()=>[e(_,{modelValue:a.business_registration_number,"onUpdate:modelValue":t[10]||(t[10]=n=>a.business_registration_number=n),placeholder:o.$t("settings.company_info.business_registration_number_placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(d,{label:o.$t("settings.company_info.tax_id")},{default:l(()=>[e(_,{modelValue:a.tax_id,"onUpdate:modelValue":t[11]||(t[11]=n=>a.tax_id=n),placeholder:o.$t("settings.company_info.tax_id_placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(q,{class:"my-6"}),i("h3",_e,f(o.$t("settings.company_info.banking_info")),1),e(U,{class:"mb-5"},{default:l(()=>[e(d,{label:o.$t("settings.company_info.bank_name")},{default:l(()=>[e(_,{modelValue:a.bank_name,"onUpdate:modelValue":t[12]||(t[12]=n=>a.bank_name=n)},null,8,["modelValue"])]),_:1},8,["label"]),e(d,{label:o.$t("settings.company_info.bank_account_number")},{default:l(()=>[e(_,{modelValue:a.bank_account_number,"onUpdate:modelValue":t[13]||(t[13]=n=>a.bank_account_number=n)},null,8,["modelValue"])]),_:1},8,["label"]),e(d,{label:o.$t("settings.company_info.bank_swift_bic")},{default:l(()=>[e(_,{modelValue:a.bank_swift_bic,"onUpdate:modelValue":t[14]||(t[14]=n=>a.bank_swift_bic=n)},null,8,["modelValue"])]),_:1},8,["label"]),e(d,{label:o.$t("settings.company_info.bank_iban")},{default:l(()=>[e(_,{modelValue:a.bank_iban,"onUpdate:modelValue":t[15]||(t[15]=n=>a.bank_iban=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(Y,{loading:s(u),disabled:s(u),type:"submit",class:"mt-6"},{left:l(n=>[s(u)?L("",!0):(k(),z(X,{key:0,class:P(n.class),name:"SaveIcon"},null,8,["class"]))]),default:l(()=>[G(" "+f(o.$tc("settings.company_info.save")),1)]),_:1},8,["loading","disabled"]),s(p).companies.length!==1?(k(),R("div",fe,[e(q,{class:"my-4"}),i("h3",be,f(o.$tc("settings.company_info.delete_company")),1),i("div",ye,[i("p",null,f(o.$tc("settings.company_info.delete_company_description")),1)]),i("div",ge,[i("button",{type:"button",class:"inline-flex items-center justify-center px-4 py-2 border border-transparent font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:text-sm",onClick:x},f(o.$tc("general.delete")),1)])])):L("",!0)]),_:1},8,["title","description"])],32),e(pe)],64)}}};export{$e as default};
