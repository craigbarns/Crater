import{B as ye,C as ge,D as K,E as Q,x as e,G as ve,m as z,H as W,I as H,J as G,l as X,d as B,K as be,e as j,p as O,q as P,L as xe,v as se,r as y,o as n,j as C,h as l,b as r,z as E,t as h,a as t,w as Z,c as m,n as F,g as x,M as J,N as ee,F as V,i as A,O as re,P as we,S as $e,k as ke,Q as le,R as T,U as Ce,V as Y,W as Be,X as Se,u as Ie,Y as Ee,f as Ue}from"./main.9d5398e3.js";import{u as ie}from"./exchange-rate.ef3d6f95.js";import{u as Me}from"./users.34efbc74.js";import{N as Ve}from"./NotificationRoot.cccb02d6.js";import{V as Le}from"./index.806f3be2.js";function Ae(v){var i,a;const s=e(v);return(a=(i=s)===null||i===void 0?void 0:i.$el)!==null&&a!==void 0?a:s}const ce=ye?window:void 0;function Ne(...v){let i,a,s,_;if(ge(v[0])?([a,s,_]=v,i=ce):[i,a,s,_]=v,!i)return K;let p=K;const f=Q(()=>e(i),c=>{p(),c&&(c.addEventListener(a,s,_),p=()=>{c.removeEventListener(a,s,_),p=K})},{immediate:!0,flush:"post"}),g=()=>{f(),p()};return ve(g),g}function ue(v,i,a={}){const{window:s=ce,event:_="pointerdown"}=a;return s?Ne(s,_,f=>{const g=Ae(v);!g||g===f.target||f.composedPath().includes(g)||i(f)},{passive:!0}):void 0}var oe;(function(v){v.UP="UP",v.RIGHT="RIGHT",v.DOWN="DOWN",v.LEFT="LEFT",v.NONE="NONE"})(oe||(oe={}));const Re={class:"flex justify-between w-full"},Te={class:"p-4 mb-16 sm:p-6 space-y-4"},Fe={key:1,class:"flex flex-col items-center"},Oe={class:"z-0 flex justify-end p-4 bg-gray-50 border-modal-bg"},De={__name:"CompanyModal",setup(v){const i=z(),a=W(),s=H(),_=G(),{t:p}=X();let f=B(!1),g=B(null),c=B(!1),u=B(null),b=B(null);const d=be({name:null,currency:"",address:{country_id:null}}),U=j(()=>s.active&&s.componentName==="CompanyModal"),w={newCompanyForm:{name:{required:O.withMessage(p("validation.required"),P),minLength:O.withMessage(p("validation.name_min_length",{count:3}),xe(3))},address:{country_id:{required:O.withMessage(p("validation.required"),P)}},currency:{required:O.withMessage(p("validation.required"),P)}}},o=se(w,{newCompanyForm:d});async function $(){c.value=!0,await _.fetchCurrencies(),await _.fetchCountries(),d.currency=a.selectedCompanyCurrency.id,d.address.country_id=a.selectedCompany.address.country_id,c.value=!1}function M(S,I){b.value=S,u.value=I}function k(){b.value=null,u.value=null}async function D(){if(o.value.newCompanyForm.$touch(),o.value.$invalid)return!0;f.value=!0;try{const S=await a.addNewCompany(d);if(S.data.data){if(await a.setSelectedCompany(S.data.data),u&&u.value){let I=new FormData;I.append("company_logo",JSON.stringify({name:b.value,data:u.value})),await a.updateCompanyLogo(I),i.push("/admin/dashboard")}await _.setIsAppLoaded(!1),await _.bootstrap(),R()}f.value=!1}catch{f.value=!1}}function N(){d.name="",d.currency="",d.address.country_id="",o.value.$reset()}function R(){s.closeModal(),setTimeout(()=>{N(),o.value.$reset()},300)}return(S,I)=>{const te=y("BaseIcon"),de=y("BaseContentPlaceholdersBox"),me=y("BaseContentPlaceholders"),pe=y("BaseFileUploader"),q=y("BaseInputGroup"),_e=y("BaseInput"),ae=y("BaseMultiselect"),fe=y("BaseInputGrid"),ne=y("BaseButton"),he=y("BaseModal");return n(),C(he,{show:U.value,onClose:R,onOpen:$},{header:l(()=>[r("div",Re,[E(h(e(s).title)+" ",1),t(te,{name:"XIcon",class:"w-6 h-6 text-gray-500 cursor-pointer",onClick:R})])]),default:l(()=>[r("form",{action:"",onSubmit:Z(D,["prevent"])},[r("div",Te,[t(fe,{layout:"one-column"},{default:l(()=>[t(q,{"content-loading":e(c),label:S.$tc("settings.company_info.company_logo")},{default:l(()=>[e(c)?(n(),C(me,{key:0},{default:l(()=>[t(de,{rounded:!0,class:"w-full h-24"})]),_:1})):(n(),m("div",Fe,[t(pe,{"preview-image":e(g),base64:"",onRemove:k,onChange:M},null,8,["preview-image"])]))]),_:1},8,["content-loading","label"]),t(q,{label:S.$tc("settings.company_info.company_name"),error:e(o).newCompanyForm.name.$error&&e(o).newCompanyForm.name.$errors[0].$message,"content-loading":e(c),required:""},{default:l(()=>[t(_e,{modelValue:d.name,"onUpdate:modelValue":I[0]||(I[0]=L=>d.name=L),invalid:e(o).newCompanyForm.name.$error,"content-loading":e(c),onInput:I[1]||(I[1]=L=>e(o).newCompanyForm.name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"]),t(q,{"content-loading":e(c),label:S.$tc("settings.company_info.country"),error:e(o).newCompanyForm.address.country_id.$error&&e(o).newCompanyForm.address.country_id.$errors[0].$message,required:""},{default:l(()=>[t(ae,{modelValue:d.address.country_id,"onUpdate:modelValue":I[2]||(I[2]=L=>d.address.country_id=L),"content-loading":e(c),label:"name",invalid:e(o).newCompanyForm.address.country_id.$error,options:e(_).countries,"value-prop":"id","can-deselect":!0,"can-clear":!1,searchable:"","track-by":"name"},null,8,["modelValue","content-loading","invalid","options"])]),_:1},8,["content-loading","label","error"]),t(q,{label:S.$t("wizard.currency"),error:e(o).newCompanyForm.currency.$error&&e(o).newCompanyForm.currency.$errors[0].$message,"content-loading":e(c),"help-text":S.$t("wizard.currency_set_alert"),required:""},{default:l(()=>[t(ae,{modelValue:d.currency,"onUpdate:modelValue":I[3]||(I[3]=L=>d.currency=L),"content-loading":e(c),options:e(_).currencies,label:"name","value-prop":"id",searchable:!0,"track-by":"name",placeholder:S.$tc("settings.currencies.select_currency"),invalid:e(o).newCompanyForm.currency.$error,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading","help-text"])]),_:1})]),r("div",Oe,[t(ne,{class:"mr-3 text-sm",variant:"primary-outline",outline:"",type:"button",onClick:R},{default:l(()=>[E(h(S.$t("general.cancel")),1)]),_:1}),t(ne,{loading:e(f),disabled:e(f),variant:"primary",type:"submit"},{left:l(L=>[e(f)?x("v-if",!0):(n(),C(te,{key:0,name:"SaveIcon",class:F(L.class)},null,8,["class"]))]),default:l(()=>[E(" "+h(S.$t("general.save")),1)]),_:1},8,["loading","disabled"])])],32)]),_:1},8,["show"])}}},je={key:0,class:"w-16 text-sm font-medium truncate sm:w-auto"},Ge={key:0,class:"absolute right-0 mt-2 bg-white rounded-md shadow-lg"},qe={class:"overflow-y-auto scrollbar-thin scrollbar-thumb-rounded-full w-[250px] max-h-[350px] scrollbar-thumb-gray-300 scrollbar-track-gray-10 pb-4"},Pe={class:"px-3 py-2 text-xs font-semibold text-gray-400 mb-0.5 block uppercase"},ze={key:0,class:"flex flex-col items-center justify-center p-2 px-3 mt-4 text-base text-gray-400"},We={key:1},He={key:0},Xe=["onClick"],Je={class:"flex items-center"},Ke={class:"flex items-center justify-center mr-3 overflow-hidden text-base font-semibold bg-gray-200 rounded-md w-9 h-9 text-primary-500"},Ye={key:0},Qe=["src"],Ze={class:"flex flex-col"},et={class:"text-sm"},tt={class:"font-medium"},at={__name:"CompanySwitcher",setup(v){const i=W(),a=H(),s=J(),_=z(),p=G(),{t:f}=X(),g=ee(),c=B(!1),u=B(""),b=B(null);Q(s,()=>{c.value=!1,u.value=""}),ue(b,()=>{c.value=!1});function d(o){if(o)return o.split(" ")[0].charAt(0).toUpperCase()}function U(){a.openModal({title:f("company_switcher.new_company"),componentName:"CompanyModal",size:"sm"})}async function w(o){await i.setSelectedCompany(o),_.push("/admin/dashboard"),await p.setIsAppLoaded(!1),await p.bootstrap()}return(o,$)=>{const M=y("BaseIcon");return n(),m("div",{ref_key:"companySwitchBar",ref:b,class:"relative rounded"},[t(De),r("div",{class:"flex items-center justify-center px-3 h-8 md:h-9 ml-2 text-sm text-white bg-white rounded cursor-pointer bg-opacity-20",onClick:$[0]||($[0]=k=>c.value=!c.value)},[e(i).selectedCompany?(n(),m("span",je,h(e(i).selectedCompany.name),1)):x("v-if",!0),t(M,{name:"ChevronDownIcon",class:"h-5 ml-1 text-white"})]),t(re,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:l(()=>[c.value?(n(),m("div",Ge,[r("div",qe,[r("label",Pe,h(o.$t("company_switcher.label")),1),e(i).companies.length<1?(n(),m("div",ze,[t(M,{name:"ExclamationCircleIcon",class:"h-5 text-gray-400"}),E(" "+h(o.$t("company_switcher.no_results_found")),1)])):(n(),m("div",We,[e(i).companies.length>0?(n(),m("div",He,[(n(!0),m(V,null,A(e(i).companies,(k,D)=>(n(),m("div",{key:D,class:F(["p-2 px-3 rounded-md cursor-pointer hover:bg-gray-100 hover:text-primary-500",{"bg-gray-100 text-primary-500":e(i).selectedCompany.id===k.id}]),onClick:N=>w(k)},[r("div",Je,[r("span",Ke,[k.logo?(n(),m("img",{key:1,src:k.logo,alt:"Company logo",class:"w-full h-full object-contain"},null,8,Qe)):(n(),m("span",Ye,h(d(k.name)),1))]),r("div",Ze,[r("span",et,h(k.name),1)])])],10,Xe))),128))])):x("v-if",!0)]))]),e(g).currentUser.is_owner?(n(),m("div",{key:0,class:"flex items-center justify-center p-4 pl-3 border-t-2 border-gray-100 cursor-pointer text-primary-400 hover:text-primary-500",onClick:U},[t(M,{name:"PlusIcon",class:"h-5 mr-2"}),r("span",tt,h(o.$t("company_switcher.add_new_company")),1)])):x("v-if",!0)])):x("v-if",!0)]),_:1})],512)}}},nt={key:0,class:"scrollbar-thin scrollbar-thumb-rounded-full scrollbar-thumb-gray-300 scrollbar-track-gray-100 overflow-y-auto bg-white rounded-md mt-2 shadow-lg p-3 absolute w-[300px] h-[200px] right-0"},ot={key:0,class:"flex items-center justify-center text-gray-400 text-base flex-col mt-4"},st={key:1},rt={key:0},lt={class:"text-sm text-gray-400 mb-0.5 block px-2 uppercase"},it={class:"flex items-center justify-center w-9 h-9 mr-3 text-base font-semibold bg-gray-200 rounded-full text-primary-500"},ct={class:"flex flex-col"},ut={class:"text-sm"},dt={key:0,class:"text-xs text-gray-400"},mt={key:1,class:"text-xs text-gray-400"},pt={key:1,class:"mt-2"},_t={class:"text-sm text-gray-400 mb-2 block px-2 mb-0.5 uppercase"},ft={class:"flex items-center justify-center w-9 h-9 mr-3 text-base font-semibold bg-gray-200 rounded-full text-primary-500"},ht={class:"flex flex-col"},yt={class:"text-sm"},gt={class:"text-xs text-gray-400"},vt={__name:"GlobalSearchBar",setup(v){const i=Me(),a=B(!1),s=B(""),_=B(null),p=B(!1),f=J();Q(f,()=>{a.value=!1,s.value=""}),g=we.exports.debounce(g,500),ue(_,()=>{a.value=!1,s.value=""});function g(){let u={search:s.value};s.value&&(p.value=!0,i.searchUsers(u).then(()=>{a.value=!0}),p.value=!1),s.value===""&&(a.value=!1)}function c(u){if(u)return u.split(" ")[0].charAt(0).toUpperCase()}return(u,b)=>{const d=y("BaseIcon"),U=y("BaseInput"),w=y("router-link");return n(),m("div",{ref_key:"searchBar",ref:_,class:"hidden rounded md:block relative"},[r("div",null,[t(U,{modelValue:s.value,"onUpdate:modelValue":b[0]||(b[0]=o=>s.value=o),placeholder:"Search...","container-class":"!rounded",class:"h-8 md:h-9 !rounded",onInput:g},{left:l(()=>[t(d,{name:"SearchIcon",class:"text-gray-400"})]),right:l(()=>[p.value?(n(),C($e,{key:0,class:"h-5 text-primary-500"})):x("v-if",!0)]),_:1},8,["modelValue"])]),t(re,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:l(()=>[a.value?(n(),m("div",nt,[e(i).userList.length<1&&e(i).customerList.length<1?(n(),m("div",ot,[t(d,{name:"ExclamationCircleIcon",class:"text-gray-400"}),E(" "+h(u.$t("global_search.no_results_found")),1)])):(n(),m("div",st,[e(i).customerList.length>0?(n(),m("div",rt,[r("label",lt,h(u.$t("global_search.customers")),1),(n(!0),m(V,null,A(e(i).customerList,(o,$)=>(n(),m("div",{key:$,class:"p-2 hover:bg-gray-100 cursor-pointer rounded-md"},[t(w,{to:{path:`/admin/customers/${o.id}/view`},class:"flex items-center"},{default:l(()=>[r("span",it,h(c(o.name)),1),r("div",ct,[r("span",ut,h(o.name),1),o.contact_name?(n(),m("span",dt,h(o.contact_name),1)):(n(),m("span",mt,h(o.email),1))])]),_:2},1032,["to"])]))),128))])):x("v-if",!0),e(i).userList.length>0?(n(),m("div",pt,[r("label",_t,h(u.$t("global_search.users")),1),(n(!0),m(V,null,A(e(i).userList,(o,$)=>(n(),m("div",{key:$,class:"p-2 hover:bg-gray-100 cursor-pointer rounded-md"},[t(w,{to:{path:`/admin/users/${o.id}/edit`},class:"flex items-center"},{default:l(()=>[r("span",ft,h(c(o.name)),1),r("div",ht,[r("span",yt,h(o.name),1),r("span",gt,h(o.email),1)])]),_:2},1032,["to"])]))),128))])):x("v-if",!0)]))])):x("v-if",!0)]),_:1})],512)}}},bt={class:"fixed top-0 left-0 z-20 flex items-center justify-between w-full px-4 py-3 md:h-16 md:px-8 bg-gradient-to-r from-primary-500 to-primary-400"},xt=["src"],wt={class:"flex float-right h-8 m-0 list-none md:h-9"},$t={key:0,class:"relative hidden float-left m-0 md:block"},kt={class:"flex items-center justify-center w-8 h-8 ml-2 text-sm text-black bg-white rounded md:h-9 md:w-9"},Ct={class:"ml-2"},Bt={class:"relative block float-left ml-2"},St=["src"],It={__name:"TheSiteHeader",setup(v){const i=ke(),a=ee(),s=G(),_=z(),p=j(()=>a.currentUser&&a.currentUser.avatar!==0?a.currentUser.avatar:g()),f=j(()=>s.globalSettings.admin_portal_logo?"/storage/"+s.globalSettings.admin_portal_logo:!1);function g(){return new URL("/build/img/default-avatar.jpg",self.location)}function c(){return a.hasAbilities([T.CREATE_INVOICE,T.CREATE_ESTIMATE,T.CREATE_CUSTOMER])}async function u(){await i.logout(),_.push("/login")}function b(){s.setSidebarVisibility(!0)}return(d,U)=>{const w=y("router-link"),o=y("BaseIcon"),$=y("BaseDropdownItem"),M=y("BaseDropdown");return n(),m("header",bt,[t(w,{to:"/admin/dashboard",class:"float-none text-lg not-italic font-black tracking-wider text-white brand-main md:float-left font-base hidden md:block"},{default:l(()=>[f.value?(n(),m("img",{key:0,src:f.value,class:"h-6"},null,8,xt)):(n(),C(le,{key:1,class:"h-6","light-color":"white","dark-color":"white"}))]),_:1}),x(" toggle button"),r("div",{class:F([{"is-active":e(s).isSidebarOpen},"flex float-left p-1 overflow-visible text-sm ease-linear bg-white border-0 rounded cursor-pointer md:hidden md:ml-0 hover:bg-gray-100"]),onClick:Z(b,["prevent"])},[t(o,{name:"MenuIcon",class:"!w-6 !h-6 text-gray-500"})],2),r("ul",wt,[c?(n(),m("li",$t,[t(M,{"width-class":"w-48"},{activator:l(()=>[r("div",kt,[t(o,{name:"PlusIcon",class:"w-5 h-5 text-gray-600"})])]),default:l(()=>[t(w,{to:"/admin/invoices/create"},{default:l(()=>[e(a).hasAbilities(e(T).CREATE_INVOICE)?(n(),C($,{key:0},{default:l(()=>[t(o,{name:"DocumentTextIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),E(" "+h(d.$t("invoices.new_invoice")),1)]),_:1})):x("v-if",!0)]),_:1}),t(w,{to:"/admin/estimates/create"},{default:l(()=>[e(a).hasAbilities(e(T).CREATE_ESTIMATE)?(n(),C($,{key:0},{default:l(()=>[t(o,{name:"DocumentIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),E(" "+h(d.$t("estimates.new_estimate")),1)]),_:1})):x("v-if",!0)]),_:1}),t(w,{to:"/admin/customers/create"},{default:l(()=>[e(a).hasAbilities(e(T).CREATE_CUSTOMER)?(n(),C($,{key:0},{default:l(()=>[t(o,{name:"UserIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),E(" "+h(d.$t("customers.new_customer")),1)]),_:1})):x("v-if",!0)]),_:1})]),_:1})])):x("v-if",!0),r("li",Ct,[e(a).currentUser.is_owner||e(a).hasAbilities(e(T).VIEW_CUSTOMER)?(n(),C(vt,{key:0})):x("v-if",!0)]),r("li",null,[t(at)]),x(" User Dropdown"),r("li",Bt,[t(M,{"width-class":"w-48"},{activator:l(()=>[r("img",{src:p.value,class:"block w-8 h-8 rounded md:h-9 md:w-9 object-cover"},null,8,St)]),default:l(()=>[t(w,{to:"/admin/settings/account-settings"},{default:l(()=>[t($,null,{default:l(()=>[t(o,{name:"CogIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),E(" "+h(d.$t("navigation.settings")),1)]),_:1})]),_:1}),t($,{onClick:u},{default:l(()=>[t(o,{name:"LogoutIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),E(" "+h(d.$t("navigation.logout")),1)]),_:1})]),_:1})])])])}}},Et={class:"relative flex flex-col flex-1 w-full max-w-xs bg-white"},Ut={class:"absolute top-0 right-0 pt-2 -mr-12"},Mt=r("span",{class:"sr-only"},"Close sidebar",-1),Vt={class:"flex-1 h-0 pt-5 pb-4 overflow-y-auto"},Lt={class:"flex items-center shrink-0 px-4 mb-10"},At=r("div",{class:"shrink-0 w-14"},[x(" Force sidebar to shrink to fit close icon ")],-1),Nt={class:"hidden w-56 h-screen pb-32 overflow-y-auto bg-white border-r border-gray-200 border-solid xl:w-64 md:fixed md:flex md:flex-col md:inset-y-0 pt-16"},Rt={__name:"TheSiteSidebar",setup(v){const i=J(),a=G();function s(_){return i.path.indexOf(_)>-1}return(_,p)=>{const f=y("BaseIcon"),g=y("router-link");return n(),m(V,null,[x(" MOBILE MENU "),t(e(Se),{as:"template",show:e(a).isSidebarOpen},{default:l(()=>[t(e(Ce),{as:"div",class:"fixed inset-0 z-40 flex md:hidden",onClose:p[3]||(p[3]=c=>e(a).setSidebarVisibility(!1))},{default:l(()=>[t(e(Y),{as:"template",enter:"transition-opacity ease-linear duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>[t(e(Be),{class:"fixed inset-0 bg-gray-600 bg-opacity-75"})]),_:1}),t(e(Y),{as:"template",enter:"transition ease-in-out duration-300","enter-from":"-translate-x-full","enter-to":"translate-x-0",leave:"transition ease-in-out duration-300","leave-from":"translate-x-0","leave-to":"-translate-x-full"},{default:l(()=>[r("div",Et,[t(e(Y),{as:"template",enter:"ease-in-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in-out duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>[r("div",Ut,[r("button",{class:"flex items-center justify-center w-10 h-10 ml-1 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:p[0]||(p[0]=c=>e(a).setSidebarVisibility(!1))},[Mt,t(f,{name:"XIcon",class:"w-6 h-6 text-white","aria-hidden":"true"})])])]),_:1}),r("div",Vt,[r("div",Lt,[t(le,{class:"block h-auto max-w-full w-36 text-primary-400",alt:"Crater Logo"})]),(n(!0),m(V,null,A(e(a).menuGroups,c=>(n(),m("nav",{key:c,class:"mt-5 space-y-1"},[(n(!0),m(V,null,A(c,u=>(n(),C(g,{key:u.name,to:u.link,class:F([s(u.link)?"text-primary-500 border-primary-500 bg-gray-100 ":"text-black","cursor-pointer px-0 pl-4 py-3 border-transparent flex items-center border-l-4 border-solid text-sm not-italic font-medium"]),onClick:p[2]||(p[2]=b=>e(a).setSidebarVisibility(!1))},{default:l(()=>[t(f,{name:u.icon,class:F([s(u.link)?"text-primary-500 ":"text-gray-400","mr-4 shrink-0 h-5 w-5"]),onClick:p[1]||(p[1]=b=>e(a).setSidebarVisibility(!1))},null,8,["name","class"]),E(" "+h(_.$t(u.title)),1)]),_:2},1032,["to","class"]))),128))]))),128))])])]),_:1}),At]),_:1})]),_:1},8,["show"]),x(" DESKTOP MENU "),r("div",Nt,[(n(!0),m(V,null,A(e(a).menuGroups,c=>(n(),m("div",{key:c,class:"p-0 m-0 mt-6 list-none"},[(n(!0),m(V,null,A(c,u=>(n(),C(g,{key:u,to:u.link,class:F([s(u.link)?"text-primary-500 border-primary-500 bg-gray-100 ":"text-black","cursor-pointer px-0 pl-6 hover:bg-gray-50 py-3 group flex items-center border-l-4 border-solid border-transparent text-sm not-italic font-medium"])},{default:l(()=>[t(f,{name:u.icon,class:F([s(u.link)?"text-primary-500 group-hover:text-primary-500 ":"text-gray-400 group-hover:text-black","mr-4 shrink-0 h-5 w-5 "])},null,8,["name","class"]),E(" "+h(_.$t(u.title)),1)]),_:2},1032,["to","class"]))),128))]))),128))])],64)}}},Tt={class:"font-medium text-lg text-left"},Ft={class:"mt-2 text-sm leading-snug text-gray-500",style:{"max-width":"680px"}},Ot={class:"text-gray-500 sm:text-sm"},Dt={class:"text-gray-400 text-xs mt-2 font-light"},jt={slot:"footer",class:"z-0 flex justify-end mt-4 pt-4 border-t border-gray-200 border-solid border-modal-bg"},Gt={__name:"ExchangeRateBulkUpdate",emits:["update"],setup(v,{emit:i}){const a=ie();Ie();const s=W(),{t:_,tm:p}=X();let f=B(!1);B(!1);const g={exchange_rate:{required:O.withMessage(_("validation.required"),P),decimal:O.withMessage(_("validation.valid_exchange_rate"),Ee)}},c=se(),u=i;async function b(){if(c.value.$touch(),c.value.$invalid)return!0;f.value=!0;let d=a.bulkCurrencies.map(w=>({id:w.id,exchange_rate:w.exchange_rate})),U=await a.updateBulkExchangeRate({currencies:d});U.data.success&&u("update",U.data.success),f.value=!1}return(d,U)=>{const w=y("BaseInput"),o=y("BaseInputGroup"),$=y("BaseButton"),M=y("BaseCard");return n(),C(M,null,{default:l(()=>[r("h6",Tt,h(d.$t("settings.exchange_rate.title")),1),r("p",Ft,h(d.$t("settings.exchange_rate.description",{currency:e(s).selectedCompanyCurrency.name})),1),r("form",{action:"",onSubmit:Z(b,["prevent"])},[(n(!0),m(V,null,A(e(a).bulkCurrencies,(k,D)=>(n(),C(e(Le),{key:D,state:k,rules:g},{default:l(({v:N})=>[t(o,{class:"my-5",label:`${k.code} to ${e(s).selectedCompanyCurrency.code}`,error:N.exchange_rate.$error&&N.exchange_rate.$errors[0].$message,required:""},{default:l(()=>[t(w,{modelValue:k.exchange_rate,"onUpdate:modelValue":R=>k.exchange_rate=R,addon:`1 ${k.code} =`,invalid:N.exchange_rate.$error,onInput:R=>N.exchange_rate.$touch()},{right:l(()=>[r("span",Ot,h(e(s).selectedCompanyCurrency.code),1)]),_:2},1032,["modelValue","onUpdate:modelValue","addon","invalid","onInput"]),r("span",Dt,h(d.$t("settings.exchange_rate.exchange_help_text",{currency:k.code,baseCurrency:e(s).selectedCompanyCurrency.code})),1)]),_:2},1032,["label","error"])]),_:2},1032,["state"]))),128)),r("div",jt,[t($,{loading:e(f),variant:"primary",type:"submit"},{default:l(()=>[E(h(d.$t("general.save")),1)]),_:1},8,["loading"])])],32)]),_:1})}}},qt={__name:"ExchangeRateBulkUpdateModal",setup(v){const i=H(),a=j(()=>i.active&&i.componentName==="ExchangeRateBulkUpdateModal");function s(){i.closeModal()}return(_,p)=>{const f=y("BaseModal");return n(),C(f,{show:a.value},{default:l(()=>[t(Gt,{onUpdate:p[0]||(p[0]=g=>s())})]),_:1},8,["show"])}}},Pt={key:0,class:"h-full"},zt={class:"h-screen h-screen-ios overflow-y-auto md:pl-56 xl:pl-64 min-h-0"},Wt={class:"pt-16 pb-16"},Qt={__name:"LayoutBasic",setup(v){const i=G(),a=J(),s=ee(),_=z(),p=H();X();const f=ie(),g=W(),c=j(()=>i.isAppLoaded);return Ue(()=>{i.bootstrap().then(u=>{a.meta.ability&&!s.hasAbilities(a.meta.ability)?_.push({name:"account.settings"}):a.meta.isOwner&&!s.currentUser.is_owner&&_.push({name:"account.settings"}),u.data.current_company_settings.bulk_exchange_rate_configured==="NO"&&f.fetchBulkCurrencies().then(b=>{if(b.data.currencies.length)p.openModal({componentName:"ExchangeRateBulkUpdateModal",size:"sm"});else{let d={settings:{bulk_exchange_rate_configured:"YES"}};g.updateCompanySettings({data:d})}})})}),(u,b)=>{const d=y("router-view"),U=y("BaseGlobalLoader");return c.value?(n(),m("div",Pt,[t(Ve),t(It),t(Rt),t(qt),r("main",zt,[r("div",Wt,[t(d)])])])):(n(),C(U,{key:1}))}}};export{Qt as default};
