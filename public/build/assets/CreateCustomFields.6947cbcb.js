import{l as E,p as T,ak as P,v as g,e as _,an as I,r as f,o as n,j as m,h as v,a4 as D,x as p,ao as s,ai as q,ap as h,E as F,c as y,a as V,F as L,i as w,g as S,ah as b}from"./main.7dfd7dba.js";function x(e){switch(e){case"./types/DateTimeType.vue":return s(()=>import("./DateTimeType.59a6a0c2.js"),["assets/DateTimeType.59a6a0c2.js","assets/main.7dfd7dba.js","assets/main.53dff427.css"]);case"./types/DateType.vue":return s(()=>import("./DateType.a52c821d.js"),["assets/DateType.a52c821d.js","assets/main.7dfd7dba.js","assets/main.53dff427.css"]);case"./types/DropdownType.vue":return s(()=>import("./DropdownType.e1324d56.js"),["assets/DropdownType.e1324d56.js","assets/main.7dfd7dba.js","assets/main.53dff427.css"]);case"./types/InputType.vue":return s(()=>import("./InputType.b6dc2f2d.js"),["assets/InputType.b6dc2f2d.js","assets/main.7dfd7dba.js","assets/main.53dff427.css"]);case"./types/NumberType.vue":return s(()=>import("./NumberType.471fa26d.js"),["assets/NumberType.471fa26d.js","assets/main.7dfd7dba.js","assets/main.53dff427.css"]);case"./types/PhoneType.vue":return s(()=>import("./PhoneType.4edeb353.js"),["assets/PhoneType.4edeb353.js","assets/main.7dfd7dba.js","assets/main.53dff427.css"]);case"./types/SwitchType.vue":return s(()=>import("./SwitchType.7dfc0890.js"),["assets/SwitchType.7dfc0890.js","assets/main.7dfd7dba.js","assets/main.53dff427.css"]);case"./types/TextAreaType.vue":return s(()=>import("./TextAreaType.0cf2695c.js"),["assets/TextAreaType.0cf2695c.js","assets/main.7dfd7dba.js","assets/main.53dff427.css"]);case"./types/TimeType.vue":return s(()=>import("./TimeType.d44f40e8.js"),["assets/TimeType.d44f40e8.js","assets/main.7dfd7dba.js","assets/main.53dff427.css"]);case"./types/UrlType.vue":return s(()=>import("./UrlType.3fa4c61e.js"),["assets/UrlType.3fa4c61e.js","assets/main.7dfd7dba.js","assets/main.53dff427.css"]);default:return new Promise(function(i,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+e)))})}}const C={__name:"CreateCustomFieldsSingle",props:{field:{type:Object,required:!0},customFieldScope:{type:String,required:!0},index:{type:Number,required:!0},store:{type:Object,required:!0},storeProp:{type:String,required:!0}},setup(e){const i=e,{t}=E(),l={value:{required:T.withMessage(t("validation.required"),P(i.field.is_required))}},a=g(l,_(()=>i.field),{$scope:i.customFieldScope}),r=_(()=>i.field.type?I(()=>x(`./types/${i.field.type}Type.vue`)):!1);return(u,o)=>{const d=f("BaseInputGroup");return n(),m(d,{label:e.field.label,required:!!e.field.is_required,error:p(a).value.$error&&p(a).value.$errors[0].$message},{default:v(()=>[(n(),m(D(r.value),{modelValue:e.field.value,"onUpdate:modelValue":o[0]||(o[0]=c=>e.field.value=c),options:e.field.options,invalid:p(a).value.$error,placeholder:e.field.placeholder},null,8,["modelValue","options","invalid","placeholder"]))]),_:1},8,["label","required","error"])}}},O={key:0},R={__name:"CreateCustomFields",props:{store:{type:Object,required:!0},storeProp:{type:String,required:!0},isEdit:{type:Boolean,default:!1},type:{type:String,default:null},gridLayout:{type:String,default:"two-column"},isLoading:{type:Boolean,default:null},customFieldScope:{type:String,required:!0}},setup(e){const i=q(),t=e;a();function l(){t.isEdit&&t.store[t.storeProp].fields.forEach(r=>{const u=t.store[t.storeProp].customFields.findIndex(o=>o.id===r.custom_field_id);if(u>-1){let o=r.default_answer;o&&r.custom_field.type==="DateTime"&&(o=b(r.default_answer,"YYYY-MM-DD HH:mm:ss").format("YYYY-MM-DD HH:mm")),t.store[t.storeProp].customFields[u]={...r,id:r.custom_field_id,value:o,label:r.custom_field.label,options:r.custom_field.options,is_required:r.custom_field.is_required,placeholder:r.custom_field.placeholder,order:r.custom_field.order}}})}async function a(){let u=(await i.fetchCustomFields({type:t.type,limit:"all"})).data.data;u.map(o=>o.value=o.default_answer),t.store[t.storeProp].customFields=h.sortBy(u,o=>o.order),l()}return F(()=>t.store[t.storeProp].fields,r=>{l()}),(r,u)=>{const o=f("BaseInputGrid");return e.store[e.storeProp]&&e.store[e.storeProp].customFields.length>0&&!e.isLoading?(n(),y("div",O,[V(o,{layout:e.gridLayout},{default:v(()=>[(n(!0),y(L,null,w(e.store[e.storeProp].customFields,(d,c)=>(n(),m(C,{key:d.id,"custom-field-scope":e.customFieldScope,store:e.store,"store-prop":e.storeProp,index:c,field:d},null,8,["custom-field-scope","store","store-prop","index","field"]))),128))]),_:1},8,["layout"])])):S("",!0)}}};export{R as _};
