import{H as R,I as A,J,m as ee,l as E,d as C,K as H,e as N,p as k,q as z,a2 as ae,v as K,r,o as I,j as L,h as l,b as d,t as f,x as s,w as O,a as e,z as G,n as P,g as w,a5 as te,c as j,y as ne,F as oe,L as le}from"./main.9d5398e3.js";const se={class:"flex justify-between w-full"},ie={class:"px-6 pt-6"},de={class:"font-medium text-lg text-left"},re={class:"mt-2 text-sm leading-snug text-gray-500",style:{"max-width":"680px"}},ue={class:"p-4 sm:p-6 space-y-4"},me={class:"z-0 flex justify-end p-4 bg-gray-50 border-modal-bg"},pe={__name:"DeleteCompanyModal",setup(Q){const p=R(),v=A(),h=J(),V=ee(),{t:S}=E();let u=C(!1);const a=H({id:p.selectedCompany.id,name:null}),$=N(()=>v.active&&v.componentName==="DeleteCompanyModal"),y={formData:{name:{required:k.withMessage(S("validation.required"),z),sameAsName:k.withMessage(S("validation.company_name_not_same"),ae(p.selectedCompany.name))}}},c=K(y,{formData:a},{$scope:!1});async function B(){if(c.value.$touch(),c.value.$invalid)return!0;const g=p.companies[0];u.value=!0;try{const b=await p.deleteCompany(a);console.log(b.data.success),b.data.success&&(m(),await p.setSelectedCompany(g),V.push("/admin/dashboard"),await h.setIsAppLoaded(!1),await h.bootstrap()),u.value=!1}catch{u.value=!1}}function M(){a.id=null,a.name="",c.value.$reset()}function m(){v.closeModal(),setTimeout(()=>{M(),c.value.$reset()},300)}return(g,b)=>{const x=r("BaseInput"),q=r("BaseInputGroup"),o=r("BaseButton"),t=r("BaseIcon"),U=r("BaseModal");return I(),L(U,{show:$.value,onClose:m},{default:l(()=>[d("div",se,[d("div",ie,[d("h6",de,f(s(v).title),1),d("p",re,f(g.$t("settings.company_info.delete_company_modal_desc",{company:s(p).selectedCompany.name})),1)])]),d("form",{action:"",onSubmit:O(B,["prevent"])},[d("div",ue,[e(q,{label:g.$t("settings.company_info.delete_company_modal_label",{company:s(p).selectedCompany.name}),error:s(c).formData.name.$error&&s(c).formData.name.$errors[0].$message,required:""},{default:l(()=>[e(x,{modelValue:a.name,"onUpdate:modelValue":b[0]||(b[0]=i=>a.name=i),invalid:s(c).formData.name.$error,onInput:b[1]||(b[1]=i=>s(c).formData.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),d("div",me,[e(o,{class:"mr-3 text-sm",variant:"primary-outline",outline:"",type:"button",onClick:m},{default:l(()=>[G(f(g.$t("general.cancel")),1)]),_:1}),e(o,{loading:s(u),disabled:s(u),variant:"danger",type:"submit"},{left:l(i=>[s(u)?w("v-if",!0):(I(),L(t,{key:0,name:"TrashIcon",class:P(i.class)},null,8,["class"]))]),default:l(()=>[G(" "+f(g.$t("general.delete")),1)]),_:1},8,["loading","disabled"])])],32)]),_:1},8,["show"])}}},ce={class:"text-base font-semibold text-gray-900 mb-4"},_e={class:"text-base font-semibold text-gray-900 mb-4"},fe={key:0,class:"py-5"},be={class:"text-lg leading-6 font-medium text-gray-900"},ye={class:"mt-2 max-w-xl text-sm text-gray-500"},ge={class:"mt-5"},$e={__name:"CompanyInfoSettings",setup(Q){const p=R(),v=J(),h=A(),{t:V}=E(),S=te("utils");let u=C(!1);const a=H({name:null,logo:null,address:{address_street_1:"",address_street_2:"",website:"",country_id:null,state:"",city:"",phone:"",zip:""},business_registration_number:null,tax_id:null,bank_name:null,bank_account_number:null,bank_swift_bic:null,bank_iban:null});S.mergeSettings(a,{...p.selectedCompany});let $=C([]),y=C(null),c=C(null);const B=C(!1);a.logo&&$.value.push({image:a.logo});const M=N(()=>({name:{required:k.withMessage(V("validation.required"),z),minLength:k.withMessage(V("validation.name_min_length"),le(3))},address:{country_id:{required:k.withMessage(V("validation.required"),z)}}})),m=K(M,N(()=>a));v.fetchCountries();function g(o,t,U,i){c.value=i.name,y.value=t}function b(){y.value=null,B.value=!0}async function x(){if(m.value.$touch(),m.value.$invalid)return!0;if(u.value=!0,(await p.updateCompany(a)).data.data){if(y.value||B.value){let t=new FormData;y.value&&t.append("company_logo",JSON.stringify({name:c.value,data:y.value})),t.append("is_company_logo_removed",B.value),await p.updateCompanyLogo(t),y.value=null,B.value=!1}u.value=!1}u.value=!1}function q(o){h.openModal({title:V("settings.company_info.are_you_absolutely_sure"),componentName:"DeleteCompanyModal",size:"sm"})}return(o,t)=>{const U=r("BaseFileUploader"),i=r("BaseInputGroup"),D=r("BaseInputGrid"),_=r("BaseInput"),W=r("BaseMultiselect"),T=r("BaseTextarea"),F=r("BaseDivider"),X=r("BaseIcon"),Y=r("BaseButton"),Z=r("BaseSettingCard");return I(),j(oe,null,[d("form",{onSubmit:O(x,["prevent"])},[e(Z,{title:o.$t("settings.company_info.company_info"),description:o.$t("settings.company_info.section_description")},{default:l(()=>[e(D,{class:"mt-5"},{default:l(()=>[e(i,{label:o.$tc("settings.company_info.company_logo")},{default:l(()=>[e(U,{modelValue:s($),"onUpdate:modelValue":t[0]||(t[0]=n=>ne($)?$.value=n:$=n),base64:"",onChange:g,onRemove:b},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(D,{class:"mt-5"},{default:l(()=>[e(i,{label:o.$tc("settings.company_info.company_name"),error:s(m).name.$error&&s(m).name.$errors[0].$message,required:""},{default:l(()=>[e(_,{modelValue:a.name,"onUpdate:modelValue":t[1]||(t[1]=n=>a.name=n),invalid:s(m).name.$error,onBlur:t[2]||(t[2]=n=>s(m).name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),e(i,{label:o.$tc("settings.company_info.phone")},{default:l(()=>[e(_,{modelValue:a.address.phone,"onUpdate:modelValue":t[3]||(t[3]=n=>a.address.phone=n)},null,8,["modelValue"])]),_:1},8,["label"]),e(i,{label:o.$tc("settings.company_info.country"),error:s(m).address.country_id.$error&&s(m).address.country_id.$errors[0].$message,required:""},{default:l(()=>[e(W,{modelValue:a.address.country_id,"onUpdate:modelValue":t[4]||(t[4]=n=>a.address.country_id=n),label:"name",invalid:s(m).address.country_id.$error,options:s(v).countries,"value-prop":"id","can-deselect":!0,"can-clear":!1,searchable:"","track-by":"name"},null,8,["modelValue","invalid","options"])]),_:1},8,["label","error"]),e(i,{label:o.$tc("settings.company_info.state")},{default:l(()=>[e(_,{modelValue:a.address.state,"onUpdate:modelValue":t[5]||(t[5]=n=>a.address.state=n),name:"state",type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),e(i,{label:o.$tc("settings.company_info.city")},{default:l(()=>[e(_,{modelValue:a.address.city,"onUpdate:modelValue":t[6]||(t[6]=n=>a.address.city=n),type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),e(i,{label:o.$tc("settings.company_info.zip")},{default:l(()=>[e(_,{modelValue:a.address.zip,"onUpdate:modelValue":t[7]||(t[7]=n=>a.address.zip=n)},null,8,["modelValue"])]),_:1},8,["label"]),d("div",null,[e(i,{label:o.$tc("settings.company_info.address")},{default:l(()=>[e(T,{modelValue:a.address.address_street_1,"onUpdate:modelValue":t[8]||(t[8]=n=>a.address.address_street_1=n),rows:"2"},null,8,["modelValue"])]),_:1},8,["label"]),e(T,{modelValue:a.address.address_street_2,"onUpdate:modelValue":t[9]||(t[9]=n=>a.address.address_street_2=n),rows:"2",row:2,class:"mt-2"},null,8,["modelValue"])])]),_:1}),w(" Seller Legal & Tax Information "),e(F,{class:"my-6"}),d("h3",ce,f(o.$t("settings.company_info.legal_tax_info")),1),e(D,{class:"mb-5"},{default:l(()=>[e(i,{label:o.$t("settings.company_info.business_registration_number")},{default:l(()=>[e(_,{modelValue:a.business_registration_number,"onUpdate:modelValue":t[10]||(t[10]=n=>a.business_registration_number=n),placeholder:o.$t("settings.company_info.business_registration_number_placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(i,{label:o.$t("settings.company_info.tax_id")},{default:l(()=>[e(_,{modelValue:a.tax_id,"onUpdate:modelValue":t[11]||(t[11]=n=>a.tax_id=n),placeholder:o.$t("settings.company_info.tax_id_placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),w(" Banking Information "),e(F,{class:"my-6"}),d("h3",_e,f(o.$t("settings.company_info.banking_info")),1),e(D,{class:"mb-5"},{default:l(()=>[e(i,{label:o.$t("settings.company_info.bank_name")},{default:l(()=>[e(_,{modelValue:a.bank_name,"onUpdate:modelValue":t[12]||(t[12]=n=>a.bank_name=n)},null,8,["modelValue"])]),_:1},8,["label"]),e(i,{label:o.$t("settings.company_info.bank_account_number")},{default:l(()=>[e(_,{modelValue:a.bank_account_number,"onUpdate:modelValue":t[13]||(t[13]=n=>a.bank_account_number=n)},null,8,["modelValue"])]),_:1},8,["label"]),e(i,{label:o.$t("settings.company_info.bank_swift_bic")},{default:l(()=>[e(_,{modelValue:a.bank_swift_bic,"onUpdate:modelValue":t[14]||(t[14]=n=>a.bank_swift_bic=n)},null,8,["modelValue"])]),_:1},8,["label"]),e(i,{label:o.$t("settings.company_info.bank_iban")},{default:l(()=>[e(_,{modelValue:a.bank_iban,"onUpdate:modelValue":t[15]||(t[15]=n=>a.bank_iban=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(Y,{loading:s(u),disabled:s(u),type:"submit",class:"mt-6"},{left:l(n=>[s(u)?w("v-if",!0):(I(),L(X,{key:0,class:P(n.class),name:"SaveIcon"},null,8,["class"]))]),default:l(()=>[G(" "+f(o.$tc("settings.company_info.save")),1)]),_:1},8,["loading","disabled"]),s(p).companies.length!==1?(I(),j("div",fe,[e(F,{class:"my-4"}),d("h3",be,f(o.$tc("settings.company_info.delete_company")),1),d("div",ye,[d("p",null,f(o.$tc("settings.company_info.delete_company_description")),1)]),d("div",ge,[d("button",{type:"button",class:"inline-flex items-center justify-center px-4 py-2 border border-transparent font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:text-sm",onClick:q},f(o.$tc("general.delete")),1)])])):w("v-if",!0)]),_:1},8,["title","description"])],32),e(pe)],64)}}};export{$e as default};
